<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>thingino · 内网穿透</title>
  <script src="/a/theme-init.js"></script>
  <link rel="icon" type="image/svg+xml" href="/a/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="/a/main.css">
</head>

<body id="page-config-opc">
<nav data-app-nav></nav>

<main class="pb-4">
  <div class="container" style="min-height:80vh">
    <div data-app-controls></div>

    <section>
      <form id="opc-form" class="needs-validation" novalidate autocomplete="off">
        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">内网穿透</h2>
            <small>配置 OPC 内网穿透服务</small>
            <button type="button" class="btn btn-outline-secondary" id="opc-reload" title="从相机重新加载值">
              <i class="bi bi-arrow-clockwise"></i> 重新加载
            </button>
          </div>
          <div class="card-body">
            <div class="row g-4">
              <div class="col-12 col-lg-6">
                <h4>服务器配置</h4>
                <small>OPC 服务器地址和端口</small>
                <p class="form-text">
                  <label for="opc_server_ip">服务器 IP</label>
                  <input type="text" id="opc_server_ip" name="server_ip" class="form-control" value="" placeholder="192.168.1.100">
                </p>
                <p class="number-range">
                  <label for="opc_server_port">服务器端口</label>
                  <span class="input-group">
                    <input type="text" id="opc_server_port" name="server_port" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="1" data-max="65535" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
              </div>
              <div class="col-12 col-lg-6">
                <h4>认证配置</h4>
                <small>OPC 服务认证密钥</small>
                <p class="form-text">
                  <label for="opc_auth_key">通信密钥</label>
                  <input type="password" id="opc_auth_key" name="auth_key" class="form-control" value="" placeholder="请输入通信密钥">
                </p>
                <div class="form-check form-switch mt-3">
                  <input class="form-check-input" type="checkbox" id="opc_show_key">
                  <label class="form-check-label" for="opc_show_key">显示密钥</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">服务状态</h2>
            <small>当前 OPC 服务运行状态</small>
          </div>
          <div class="card-body">
            <div class="row g-4">
              <div class="col-12">
                <div class="d-flex align-items-center">
                  <div id="opc-status-indicator" class="me-3">
                    <span class="badge bg-secondary">未知</span>
                  </div>
                  <div id="opc-status-message" class="text-muted">
                    点击"检查状态"按钮查看服务状态
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex gap-2">
          <button type="button" id="save-opc-config" class="btn btn-primary">
            <i class="bi bi-floppy me-1"></i> 保存配置
          </button>
          <button type="button" id="check-opc-status" class="btn btn-info">
            <i class="bi bi-info-circle me-1"></i> 检查状态
          </button>
          <button type="button" id="restart-opc-service" class="btn btn-warning">
            <i class="bi bi-arrow-clockwise me-1"></i> 重启服务
          </button>
        </div>
      </form>
    </div>
  </section>
</main>

<footer data-app-footer></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="/a/main.js"></script>
<script src="/a/runtime-config.js"></script>
<script src="/a/control-bar.js"></script>
<script src="/a/navigation.js"></script>
<script src="/a/footer.js"></script>
<script src="/a/config-opc.js"></script>
</body>
</html>
