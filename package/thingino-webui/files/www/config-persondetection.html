<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>thingino · 人形检测</title>
  <script src="/a/theme-init.js"></script>
  <link rel="icon" type="image/svg+xml" href="/a/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="/a/main.css">
</head>

<body id="page-config-persondetection">
<nav data-app-nav></nav>

<main class="pb-4">
  <div class="container" style="min-height:80vh">
    <div data-app-controls></div>

    <section>
      <form id="persondetection-form" class="needs-validation" novalidate  autocomplete="off">
        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">人形检测</h2>
            <small>配置人形检测参数和录制设置。</small>
            <button type="button" class="btn btn-outline-secondary" id="persondetection-reload" title="从相机重新加载值">
              <i class="bi bi-arrow-clockwise"></i> 重新加载
            </button>
          </div>
          <div class="card-body">
            <div class="row g-4">
              <div class="col-12 col-lg-4">
                <h4>通用设置</h4>
                <small>基本检测配置</small>
                <p class="form-switch">
                  <input type="hidden" id="persondetection_enabled-false" name="persondetection_enabled" value="false">
                  <input type="checkbox" id="persondetection_enabled" name="persondetection_enabled" value="true" role="switch" class="form-check-input">
                  <label for="persondetection_enabled" class="form-check-label">启用人形检测</label>
                </p>
                <p class="form-switch">
                  <input type="hidden" id="persondetection_enable_perm-false" name="persondetection_enable_perm" value="false">
                  <input type="checkbox" id="persondetection_enable_perm" name="persondetection_enable_perm" value="true" role="switch" class="form-check-input">
                  <label for="persondetection_enable_perm" class="form-check-label">启用权限区域</label>
                </p>
                <p class="form-switch">
                  <input type="hidden" id="persondetection_enable_move-false" name="persondetection_enable_move" value="false">
                  <input type="checkbox" id="persondetection_enable_move" name="persondetection_enable_move" value="true" role="switch" class="form-check-input">
                  <label for="persondetection_enable_move" class="form-check-label">启用移动检测</label>
                </p>
              </div>
              <div class="col-12 col-lg-4">
                <h4>检测参数</h4>
                <small>灵敏度和时间设置</small>
                <p class="number-range">
                  <label for="persondetection_sensitivity">灵敏度</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_sensitivity" name="persondetection_sensitivity" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="100" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_skip_frame_count">跳帧计数</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_skip_frame_count" name="persondetection_skip_frame_count" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="100" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_detect_distance">检测距离</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_detect_distance" name="persondetection_detect_distance" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="100" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_permcnt">权限区域数量</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_permcnt" name="persondetection_permcnt" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="1" data-max="10" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
              </div>
              <div class="col-12 col-lg-4">
                <h4>时间设置</h4>
                <small>防抖和冷却时间（秒）</small>
                <p class="number-range">
                  <label for="persondetection_debounce_time">防抖时间</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_debounce_time" name="persondetection_debounce_time" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_post_time">后续时间</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_post_time" name="persondetection_post_time" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_cooldown_time">冷却时间</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_cooldown_time" name="persondetection_cooldown_time" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_init_time">初始化时间</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_init_time" name="persondetection_init_time" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
                <p class="number-range">
                  <label for="persondetection_min_time">最小时间</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_min_time" name="persondetection_min_time" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">录制设置</h2>
            <small>配置检测到人形时的录制</small>
          </div>
          <div class="card-body">
            <div class="row g-4">
              <div class="col-12 col-lg-6">
                <h4>流配置</h4>
                <p class="form-select">
                  <label for="persondetection_monitor_stream">监控流</label>
                  <select id="persondetection_monitor_stream" name="persondetection_monitor_stream" class="form-select">
                    <option value="0">流 0</option>
                    <option value="1">流 1</option>
                    <option value="2">流 2</option>
                  </select>
                </p>
                <p class="form-select">
                  <label for="persondetection_recording_stream">录制流</label>
                  <select id="persondetection_recording_stream" name="persondetection_recording_stream" class="form-select">
                    <option value="0">流 0</option>
                    <option value="1">流 1</option>
                    <option value="2">流 2</option>
                  </select>
                </p>
              </div>
              <div class="col-12 col-lg-6">
                <h4>录制时长</h4>
                <p class="number-range">
                  <label for="persondetection_recording_duration">录制时长（秒，0为无限制）</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_recording_duration" name="persondetection_recording_duration" class="form-control text-end" value="" pattern="[0-9]{1,}" title="numeric value" data-min="0" data-max="3600" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="Open slider"></button>
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">高级设置</h2>
            <small>帧大小和轮询超时</small>
          </div>
          <div class="card-body">
            <div class="row g-4">
              <div class="col-12 col-lg-4">
                <p class="number-range">
                  <label for="persondetection_frame_width">帧宽度（0为自动）</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_frame_width" name="persondetection_frame_width" class="form-control text-end" value="" pattern="[0-9]{1,}" title="数值" data-min="0" data-max="4096" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="打开滑块"></button>
                  </span>
                </p>
              </div>
              <div class="col-12 col-lg-4">
                <p class="number-range">
                  <label for="persondetection_frame_height">帧高度（0为自动）</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_frame_height" name="persondetection_frame_height" class="form-control text-end" value="" pattern="[0-9]{1,}" title="数值" data-min="0" data-max="4096" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="打开滑块"></button>
                  </span>
                </p>
              </div>
              <div class="col-12 col-lg-4">
                <p class="number-range">
                  <label for="persondetection_ivs_polling_timeout">IVS轮询超时（毫秒）</label>
                  <span class="input-group">
                    <input type="text" id="persondetection_ivs_polling_timeout" name="persondetection_ivs_polling_timeout" class="form-control text-end" value="" pattern="[0-9]{1,}" title="数值" data-min="1" data-max="5000" data-step="1">
                    <button type="button" class="btn btn-outline-secondary dropdown-toggle" aria-label="打开滑块"></button>
                  </span>
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title">保存路径</h2>
            <small>保存检测录制的目录路径</small>
          </div>
          <div class="card-body">
            <p class="form-text">
              <label for="persondetection_save_path">保存路径</label>
              <input type="text" id="persondetection_save_path" name="persondetection_save_path" class="form-control" value="" placeholder="/mnt/mmc/persondetection">
            </p>
          </div>
        </div>

        <button type="button" id="save-prudynt-config" class="btn btn-primary">
          <i class="bi bi-floppy me-1"></i> 保存配置到文件
        </button>
      </form>
    </div>
  </section>
</main>

<footer data-app-footer></footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="/a/main.js"></script>
<script src="/a/runtime-config.js"></script>
<script src="/a/control-bar.js"></script>
<script src="/a/navigation.js"></script>
<script src="/a/footer.js"></script>
<script src="/a/config-persondetection.js"></script>
<script src="/a/streamer-config.js"></script>
</body>
</html>
