<!DOCTYPE html>
<html lang="zh" data-bs-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>thingino · ZeroTier VPN配置</title>
  <script src="/a/theme-init.js"></script>
  <link rel="icon" type="image/svg+xml" href="/a/favicon.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="/a/main.css">
  <style>
    @keyframes zt-pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    .zt-pulse {
      animation: zt-pulse 2s ease-in-out infinite;
    }
  </style>
</head>

<body id="page-config-zerotier">
<nav data-app-nav></nav>

<main class="pb-4">
  <div class="container" style="min-height:80vh">
    <div data-app-controls></div>

    <div id="zt-not-supported" class="alert alert-danger d-none">
      <p><strong>此相机不支持 ZeroTier。</strong></p>
      <p>您的系统上未找到 ZeroTier 二进制文件。</p>
    </div>

    <section>
      <form id="zerotierForm" class="needs-validation" novalidate>
        <div class="card mb-3">
          <div class="card-header">
            <h2 class="card-title"><img src="/a/zerotier.svg" alt="ZeroTier" class="img-fluid icon float-start me-3 mb-1" style="max-width: 48px"> ZeroTier One VPN 客户端</h2>
            <small>地球智能以太网交换机。<a href="https://github.com/themactep/thingino-firmware/wiki/VPN:-Zerotier" target="_blank">Thingino Wiki</a></small>
            <button type="button" class="btn btn-outline-secondary" id="zerotier-reload" title="从相机重新加载值">
              <i class="bi bi-arrow-clockwise"></i> 重新加载
            </button>
          </div><!-- .card-header -->
          <div class="card-body">
            <!-- Networks List -->
            <div id="networks-list" class="mt-3">
              <div class="d-flex justify-content-between align-items-start" id="add-network">
                <div>
                  <h4>ZeroTier 网络</h4>
                  <small>管理您的 VPN 连接</small>
                </div>
                <button type="button" class="btn btn-primary" id="btn-add-network">
                  <i class="bi bi-plus-circle"></i> 添加网络
                </button>
              </div>

              <p class="text-muted">未配置网络。点击"添加网络"开始使用。</p>
            </div><!-- .row -->
          </div><!-- .card-body -->
        </div><!-- .card -->
      </form>
    </section>
  </div>
</main>

<footer data-app-footer></footer>

<!-- Add Network Modal -->
<div class="modal fade" id="addNetworkModal" tabindex="-1" aria-labelledby="addNetworkModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addNetworkModalLabel">添加 ZeroTier 网络</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="关闭"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="new-network-id" class="form-label">网络 ID</label>
          <input type="text" class="form-control" id="new-network-id" maxlength="16" pattern="[0-9a-fA-F]{16}" placeholder="16 位十六进制网络 ID">
          <small class="form-text text-muted">在 <a href="https://central.zerotier.com/" target="_blank">central.zerotier.com</a> 获取一个</small>
        </div>
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" id="new-network-autostart">
          <label class="form-check-label" for="new-network-autostart">启动时自动连接</label>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary" id="btn-save-network">
          <i class="bi bi-check-circle"></i> 保存网络
        </button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="/a/main.js"></script>
<script src="/a/runtime-config.js"></script>
<script src="/a/control-bar.js"></script>
<script src="/a/navigation.js"></script>
<script src="/a/footer.js"></script>
<script src="/a/config-zerotier.js"></script>
</body>
</html>
